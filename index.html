<!DOCTYPE html>
<html lang="html">
    <head>
        <meta charset="utf-8" />
        <title>Shaderz</title>
        <link rel="stylesheet" href="style.css">
        <!--Libreria per applicare le shader al bg-->
        <script src="https://xemantic.github.io/shader-web-background/dist/shader-web-background.min.js"></script>
        <!--Codice delle shader-->
        <script type="x-shader/x-fragment" id="bgshader">
          #ifdef GL_ES
            precision mediump float;
          #endif
          #define PI 3.14159265359
          #define e 2.71828182845

          uniform float iTime;
          uniform vec2 iResolution;

          float plot(vec2 st, float pct) {
            return  smoothstep( pct-3., pct, st.y)-smoothstep( pct, pct+0.005, st.y);
          }

          float easeInOutCirc(float x) {
              return x < 0.5 ? (1.0 - sqrt(1.0 - pow(2.0 * x, 2.0))) / 2.0 : (sqrt(1.0 - pow(-2.0 * x + 2.0, 2.0)) + 1.0) / 2.0;
          }

          void main() {
            vec2 st = gl_FragCoord.xy/iResolution;

            float y = pow(cos((PI*(st.x*2.-1.)/2.))*abs(sin(iTime)),e);

            float pct = plot(st, y);
            float colchange = easeInOutCirc(abs(sin(iTime)));

            vec3 color = mix(vec3(0.7,0.7,0.7),vec3(0.,0.,0.), colchange);
            color = (0.85-pct)*color+pct*vec3(abs(sin(st.x+iTime)),abs(sin(st.y+1.+iTime)),abs(sin(st.xy+2.+iTime)));

            gl_FragColor = vec4(color, 1.0);
          }        
        </script>
        <script>
            shaderWebBackground.shade({
              shaders: {
                bgshader: {
                  uniforms: {
                    iTime: (gl, loc) => gl.uniform1f(loc, performance.now() / 1000),
                    iResolution: (gl, loc, ctx) => gl.uniform2f(loc, ctx.width, ctx.height),
                  }
                }
              }
            });
          </script>
    </head>
    <body>
        <h1 style="font:50px Arial, Helvetica, sans-serif; color: white;">Ciao Mondo</h1>
    </body>
</html>